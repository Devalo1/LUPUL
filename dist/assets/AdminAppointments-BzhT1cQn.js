import{d as e,j as a}from"./index-Bwkz9jAa.js";import{b as t}from"./vendor-ClDHXAES.js";import{s,q as r,K as l,t as i,T as n,u as c,N as d,M as o,w as m,S as u}from"./firebase-DUCcfN4Q.js";const x=()=>{const[s,l]=t.useState(!1),[c,d]=t.useState(null),[m,u]=t.useState(null);return a.jsxs("div",{className:"p-4 bg-white rounded-lg shadow-md",children:[a.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Inițializare Date"}),a.jsx("p",{className:"mb-4",children:"Acest buton va crea colecțiile necesare pentru funcționarea modulului de programări, dacă acestea nu există deja."}),a.jsx("button",{onClick:async()=>{l(!0),d(null),u(null);try{const a=r(e,"services");if((await i(a)).empty){const e=[{name:"Consultație Psihologică",category:"Psihologie",duration:60,price:150,description:"Consultație psihologică individuală",available:!0,createdAt:n.now()},{name:"Terapie de Cuplu",category:"Terapie",duration:90,price:200,description:"Ședință de terapie pentru cupluri",available:!0,createdAt:n.now()},{name:"Coaching Personal",category:"Coaching",duration:60,price:180,description:"Coaching pentru dezvoltare personală",available:!0,createdAt:n.now()}];for(const t of e)await o(a,t);d((e=>(e||"")+"Servicii create cu succes. "))}else d((e=>(e||"")+"Serviciile există deja. "));const t=r(e,"appointments");if((await i(t)).empty){const e=new Date,a=new Date(e);a.setDate(e.getDate()+1);const s=new Date(e);s.setDate(e.getDate()+7);const r=[{userId:"user123",userName:"Andrei Popescu",userEmail:"andrei.popescu@example.com",userPhone:"0712345678",serviceType:"Psihologie",serviceName:"Consultație Psihologică",date:n.fromDate(a),startTime:"10:00",endTime:"11:00",status:"scheduled",notes:"Prima consultație",createdAt:n.now(),price:150},{userId:"user456",userName:"Maria Ionescu",userEmail:"maria.ionescu@example.com",userPhone:"0723456789",serviceType:"Terapie",serviceName:"Terapie de Cuplu",date:n.fromDate(s),startTime:"14:00",endTime:"15:30",status:"scheduled",notes:"",createdAt:n.now(),price:200}];for(const l of r)await o(t,l);d((e=>(e||"")+"Programări create cu succes."))}else d((e=>(e||"")+"Programările există deja."))}catch(a){u("A apărut o eroare la crearea datelor inițiale. Verificați consola pentru detalii.")}finally{l(!1)}},disabled:s,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:s?"Se procesează...":"Creează colecțiile necesare"}),c&&a.jsx("div",{className:"mt-4 p-3 bg-green-100 text-green-700 rounded-md",children:c}),m&&a.jsx("div",{className:"mt-4 p-3 bg-red-100 text-red-700 rounded-md",children:m})]})},p=()=>{const[p,h]=t.useState([]),[g,b]=t.useState([]),[f,y]=t.useState([]),[j,v]=t.useState(!0),[N,w]=t.useState(null),[k,S]=t.useState(!1),[T,C]=t.useState(!1),[D,A]=t.useState(!1),[P,z]=t.useState(null),[E,O]=t.useState({id:"",name:"",role:"",imageUrl:"",description:"",email:"",phone:"",schedule:[{dayOfWeek:1,startTime:"09:00",endTime:"17:00",available:!0},{dayOfWeek:2,startTime:"09:00",endTime:"17:00",available:!0},{dayOfWeek:3,startTime:"09:00",endTime:"17:00",available:!0},{dayOfWeek:4,startTime:"09:00",endTime:"17:00",available:!0},{dayOfWeek:5,startTime:"09:00",endTime:"17:00",available:!0}]}),[F,I]=t.useState(""),[M,L]=t.useState("all"),[W,U]=t.useState("all"),[V,R]=t.useState("upcoming"),[B,H]=t.useState("date"),[Y,$]=t.useState("asc"),[q,G]=t.useState("scheduled"),[J,K]=t.useState(""),[Z,Q]=t.useState(""),[X,_]=t.useState(""),[ee,ae]=t.useState(0),[te,se]=t.useState(0),[re,le]=t.useState(0),[ie,ne]=t.useState(0);t.useEffect((()=>{ce(),de(),oe()}),[]);const ce=async()=>{try{v(!0);const a=s(r(e,"appointments"),l("date","asc")),t=(await i(a)).docs.map((e=>{const a=e.data();return{id:e.id,userId:a.userId||"",userName:a.userName||"Utilizator necunoscut",userEmail:a.userEmail||"",userPhone:a.userPhone||"",serviceType:a.serviceType||"",serviceName:a.serviceName||"Serviciu necunoscut",date:a.date||null,startTime:a.startTime||"",endTime:a.endTime||"",status:a.status||"scheduled",notes:a.notes||"",createdAt:a.createdAt||null,price:a.price||0}}));h(t);const c=new Date,d=new Date(c.getFullYear(),c.getMonth(),c.getDate()),o=n.fromDate(d),m=new Date(d);m.setDate(d.getDate()-d.getDay());const u=n.fromDate(m),x=new Date(c.getFullYear(),c.getMonth(),1),p=n.fromDate(x);ae(t.filter((e=>e.date&&e.date.seconds>=o.seconds&&e.date.seconds<o.seconds+86400)).length),se(t.filter((e=>e.date&&e.date.seconds>=u.seconds&&e.date.seconds<o.seconds+604800)).length),le(t.filter((e=>e.date&&e.date.seconds>=p.seconds&&e.date.seconds<p.seconds+2678400)).length),ne(t.filter((e=>"cancelled"===e.status)).length)}catch(a){alert("Eroare la încărcarea programărilor. Vă rugăm încercați din nou.")}finally{v(!1)}},de=async()=>{try{const a=s(r(e,"services")),t=(await i(a)).docs.map((e=>{const a=e.data();return{id:e.id,name:a.name||"",category:a.category||"",duration:a.duration||60,price:a.price||0}}));b(t)}catch(a){}},oe=async()=>{try{v(!0);const a=r(e,"specialists"),t=(await i(a)).docs.map((e=>({id:e.id,...e.data()})));y(t)}catch(a){alert("Eroare la încărcarea specialiștilor. Vă rugăm încercați din nou.")}finally{v(!1)}},me=()=>{O({id:"",name:"",role:"",imageUrl:"",description:"",email:"",phone:"",schedule:[{dayOfWeek:1,startTime:"09:00",endTime:"17:00",available:!0},{dayOfWeek:2,startTime:"09:00",endTime:"17:00",available:!0},{dayOfWeek:3,startTime:"09:00",endTime:"17:00",available:!0},{dayOfWeek:4,startTime:"09:00",endTime:"17:00",available:!0},{dayOfWeek:5,startTime:"09:00",endTime:"17:00",available:!0}]})},ue=(e,a,t)=>{const s=[...E.schedule||[]];s[e]={...s[e],[a]:t},O({...E,schedule:s})},xe=e=>["Duminică","Luni","Marți","Miercuri","Joi","Vineri","Sâmbătă"][e],pe=()=>{C(!1),w(null)},he=e=>{switch(e){case"scheduled":return"bg-blue-100 text-blue-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";case"no-show":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},ge=e=>{switch(e){case"scheduled":return"Programată";case"completed":return"Finalizată";case"cancelled":return"Anulată";case"no-show":return"Neprezentare";default:return e}},be=e=>{if(!e)return"Necunoscut";try{return new Date(1e3*e.seconds).toLocaleDateString("ro-RO",{year:"numeric",month:"long",day:"numeric"})}catch(a){return"Data invalidă"}},fe=e=>e||"Necunoscută",ye=e=>void 0===e?"":new Intl.NumberFormat("ro-RO",{style:"currency",currency:"RON"}).format(e),je=()=>{const e=new Date,a=new Date(e.getFullYear(),e.getMonth(),e.getDate()),t=Math.floor(a.getTime()/1e3);return p.filter((e=>{const s=!F||e.userName.toLowerCase().includes(F.toLowerCase())||e.userEmail.toLowerCase().includes(F.toLowerCase())||e.serviceName.toLowerCase().includes(F.toLowerCase()),r="all"===M||e.status===M,l="all"===W||e.serviceName===W;let i=!0;if("upcoming"===V)i=e.date&&e.date.seconds>=t;else if("past"===V)i=e.date&&e.date.seconds<t;else if("today"===V)i=e.date&&e.date.seconds>=t&&e.date.seconds<t+86400;else if("week"===V){const s=new Date(a);s.setDate(a.getDate()+7);const r={seconds:Math.floor(s.getTime()/1e3)};i=e.date&&e.date.seconds>=t&&e.date.seconds<r.seconds}return s&&r&&l&&i})).sort(((e,a)=>{if("date"===B){const t=e.date.seconds-a.date.seconds;return"asc"===Y?t:-t}if("service"===B){const t=e.serviceName.localeCompare(a.serviceName);return"asc"===Y?t:-t}if("userName"===B){const t=e.userName.localeCompare(a.userName);return"asc"===Y?t:-t}if("status"===B){const t=e.status.localeCompare(a.status);return"asc"===Y?t:-t}return 0}))},ve=Array.from(new Set(p.map((e=>e.serviceName))));return a.jsxs("div",{className:"container mx-auto px-4 py-8",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[a.jsx("h2",{className:"text-xl font-bold mb-6",children:"Gestionare Programări"}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[a.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 flex flex-col",children:[a.jsx("span",{className:"text-sm text-blue-600 font-medium",children:"Programări astăzi"}),a.jsx("span",{className:"text-2xl font-bold",children:ee})]}),a.jsxs("div",{className:"bg-green-50 rounded-lg p-4 flex flex-col",children:[a.jsx("span",{className:"text-sm text-green-600 font-medium",children:"Programări săptămâna aceasta"}),a.jsx("span",{className:"text-2xl font-bold",children:te})]}),a.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 flex flex-col",children:[a.jsx("span",{className:"text-sm text-purple-600 font-medium",children:"Programări luna aceasta"}),a.jsx("span",{className:"text-2xl font-bold",children:re})]}),a.jsxs("div",{className:"bg-orange-50 rounded-lg p-4 flex flex-col",children:[a.jsx("span",{className:"text-sm text-orange-600 font-medium",children:"Programări anulate"}),a.jsx("span",{className:"text-2xl font-bold",children:ie})]})]}),a.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-700 mb-1",children:"Caută"}),a.jsx("input",{type:"text",id:"search",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Nume client, email sau serviciu...",value:F,onChange:e=>I(e.target.value)})]}),a.jsxs("div",{className:"w-full md:w-48",children:[a.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),a.jsxs("select",{id:"status",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:M,onChange:e=>L(e.target.value),children:[a.jsx("option",{value:"all",children:"Toate statusurile"}),a.jsx("option",{value:"scheduled",children:"Programate"}),a.jsx("option",{value:"completed",children:"Finalizate"}),a.jsx("option",{value:"cancelled",children:"Anulate"}),a.jsx("option",{value:"no-show",children:"Neprezentare"})]})]}),a.jsxs("div",{className:"w-full md:w-48",children:[a.jsx("label",{htmlFor:"service",className:"block text-sm font-medium text-gray-700 mb-1",children:"Serviciu"}),a.jsxs("select",{id:"service",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:W,onChange:e=>U(e.target.value),children:[a.jsx("option",{value:"all",children:"Toate serviciile"}),ve.map(((e,t)=>a.jsx("option",{value:e,children:e},t)))]})]}),a.jsxs("div",{className:"w-full md:w-48",children:[a.jsx("label",{htmlFor:"dateRange",className:"block text-sm font-medium text-gray-700 mb-1",children:"Interval de timp"}),a.jsxs("select",{id:"dateRange",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:V,onChange:e=>R(e.target.value),children:[a.jsx("option",{value:"all",children:"Toate programările"}),a.jsx("option",{value:"upcoming",children:"Viitoare"}),a.jsx("option",{value:"past",children:"Trecute"}),a.jsx("option",{value:"today",children:"Astăzi"}),a.jsx("option",{value:"week",children:"Această săptămână"})]})]})]}),a.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[a.jsxs("div",{className:"w-full md:w-48",children:[a.jsx("label",{htmlFor:"sortBy",className:"block text-sm font-medium text-gray-700 mb-1",children:"Sortează după"}),a.jsxs("select",{id:"sortBy",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:B,onChange:e=>H(e.target.value),children:[a.jsx("option",{value:"date",children:"Dată"}),a.jsx("option",{value:"userName",children:"Nume client"}),a.jsx("option",{value:"service",children:"Serviciu"}),a.jsx("option",{value:"status",children:"Status"})]})]}),a.jsxs("div",{className:"w-full md:w-48",children:[a.jsx("label",{htmlFor:"sortOrder",className:"block text-sm font-medium text-gray-700 mb-1",children:"Ordine"}),a.jsxs("select",{id:"sortOrder",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:Y,onChange:e=>$(e.target.value),children:[a.jsx("option",{value:"asc",children:"Crescător"}),a.jsx("option",{value:"desc",children:"Descrescător"})]})]})]}),j?a.jsx("div",{className:"flex justify-center items-center h-48",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full bg-white border border-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b",children:"Data și ora"}),a.jsx("th",{className:"py-3 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b",children:"Client"}),a.jsx("th",{className:"py-3 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b",children:"Serviciu"}),a.jsx("th",{className:"py-3 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b",children:"Status"}),a.jsx("th",{className:"py-3 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b",children:"Acțiuni"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200",children:je().length>0?je().map((e=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsxs("td",{className:"py-4 px-4 whitespace-nowrap",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:be(e.date)}),a.jsxs("div",{className:"text-xs text-gray-500",children:[fe(e.startTime)," - ",fe(e.endTime)]})]}),a.jsxs("td",{className:"py-4 px-4",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.userName}),a.jsx("div",{className:"text-xs text-gray-500",children:e.userEmail}),e.userPhone&&a.jsx("div",{className:"text-xs text-gray-500",children:e.userPhone})]}),a.jsxs("td",{className:"py-4 px-4",children:[a.jsx("div",{className:"text-sm text-gray-900",children:e.serviceName}),e.price&&e.price>0&&a.jsx("div",{className:"text-xs text-gray-500",children:ye(e.price)})]}),a.jsx("td",{className:"py-4 px-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${he(e.status)}`,children:ge(e.status)})}),a.jsxs("td",{className:"py-4 px-4 whitespace-nowrap",children:[a.jsx("button",{onClick:()=>(e=>{w(e),G(e.status),K(e.notes||"");const a=new Date(1e3*e.date.seconds).toISOString().slice(0,10);Q(a),_(e.startTime),S(!0)})(e),className:"text-indigo-600 hover:text-indigo-900 mr-3",children:"Editează"}),a.jsx("button",{onClick:()=>(e=>{w(e),C(!0)})(e),className:"text-red-600 hover:text-red-900",children:"Șterge"})]})]},e.id))):a.jsx("tr",{children:a.jsx("td",{colSpan:5,className:"py-4 px-4 text-center text-gray-500",children:"Nu s-au găsit programări care să corespundă criteriilor selectate."})})})]})}),a.jsxs("div",{className:"mt-8",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-xl font-bold",children:"Specialiști"}),a.jsx("button",{onClick:()=>{z(null),A(!0),me()},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Adaugă specialist"})]}),D&&a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[a.jsx("h3",{className:"text-lg font-bold mb-4",children:P?"Editează Specialist":"Adaugă Specialist Nou"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Nume ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",value:E.name,onChange:e=>O({...E,name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"Ex: Dr. Ana Popescu"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Rol ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",value:E.role,onChange:e=>O({...E,role:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"Ex: Psihoterapeut"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),a.jsx("input",{type:"email",value:E.email,onChange:e=>O({...E,email:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"email@example.com"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Telefon"}),a.jsx("input",{type:"text",value:E.phone,onChange:e=>O({...E,phone:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"Ex: 0712345678"})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"URL Imagine"}),a.jsx("input",{type:"text",value:E.imageUrl,onChange:e=>O({...E,imageUrl:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"https://example.com/image.jpg"})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descriere"}),a.jsx("textarea",{value:E.description,onChange:e=>O({...E,description:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",rows:3,placeholder:"Descriere a experienței și specializărilor"})]})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("h4",{className:"font-medium mb-2",children:"Program Săptămânal"}),a.jsx("div",{className:"border rounded-md overflow-hidden",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Zi"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ora început"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ora sfârșit"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Disponibil"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(E.schedule||[]).map(((e,t)=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:xe(e.dayOfWeek)}),a.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:a.jsx("input",{type:"time",value:e.startTime,onChange:e=>ue(t,"startTime",e.target.value),className:"border border-gray-300 rounded-md px-2 py-1",disabled:!e.available})}),a.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:a.jsx("input",{type:"time",value:e.endTime,onChange:e=>ue(t,"endTime",e.target.value),className:"border border-gray-300 rounded-md px-2 py-1",disabled:!e.available})}),a.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:a.jsx("input",{type:"checkbox",checked:e.available,onChange:e=>ue(t,"available",e.target.checked),className:"form-checkbox h-5 w-5 text-blue-600"})})]},t)))})]})})]}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx("button",{onClick:P?async()=>{if(P)try{if(v(!0),!E.name||!E.role)return void alert("Numele și rolul specialistului sunt obligatorii.");const a=c(e,"specialists",P.id);await d(a,{name:E.name,role:E.role,imageUrl:E.imageUrl,description:E.description,email:E.email,phone:E.phone,schedule:E.schedule,updatedAt:n.now()}),y(f.map((e=>e.id===P.id?{...E,id:P.id}:e))),alert("Specialist actualizat cu succes!"),A(!1),z(null),me()}catch(a){alert("Eroare la actualizarea specialistului. Vă rugăm încercați din nou.")}finally{v(!1)}}:async()=>{try{if(v(!0),!E.name||!E.role)return void alert("Numele și rolul specialistului sunt obligatorii.");const a=r(e,"specialists"),t=await o(a,{name:E.name,role:E.role,imageUrl:E.imageUrl||"https://via.placeholder.com/150",description:E.description||"",email:E.email||"",phone:E.phone||"",schedule:E.schedule||[],createdAt:n.now()}),s={...E,id:t.id};y([...f,s]),alert("Specialist adăugat cu succes!"),A(!1),me()}catch(a){alert("Eroare la adăugarea specialistului. Vă rugăm încercați din nou.")}finally{v(!1)}},disabled:j,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:j?"Se procesează...":P?"Actualizează":"Adaugă"}),a.jsx("button",{onClick:()=>A(!1),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Anulează"})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Specialist"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rol"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Program"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acțiuni"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:f.length>0?f.map((t=>{var l;return a.jsxs("tr",{children:[a.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"h-10 w-10 flex-shrink-0",children:a.jsx("img",{className:"h-10 w-10 rounded-full object-cover",src:t.imageUrl||"https://via.placeholder.com/150",alt:t.name})}),a.jsx("div",{className:"ml-4",children:a.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.name})})]})}),a.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-gray-900",children:t.role})}),a.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[t.email&&a.jsx("div",{className:"text-sm text-gray-500",children:t.email}),t.phone&&a.jsx("div",{className:"text-sm text-gray-500",children:t.phone})]}),a.jsx("td",{className:"px-4 py-4",children:a.jsx("div",{className:"text-sm text-gray-500",children:null==(l=t.schedule)?void 0:l.filter((e=>e.available)).map(((e,t)=>a.jsxs("div",{children:[xe(e.dayOfWeek),": ",e.startTime," - ",e.endTime]},t)))})}),a.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:[a.jsx("button",{onClick:()=>(e=>{z(e),O({...e}),A(!0)})(t),className:"text-indigo-600 hover:text-indigo-900 mr-3",children:"Editează"}),a.jsx("button",{onClick:()=>(async a=>{if(window.confirm("Ești sigur că vrei să ștergi acest specialist?"))try{v(!0);const t=r(e,"appointments"),l=s(t,m("specialistId","==",a));if(!(await i(l)).empty&&!window.confirm("Acest specialist are programări. Ștergerea sa va afecta programările existente. Continuați?"))return;await u(c(e,"specialists",a)),y(f.filter((e=>e.id!==a))),alert("Specialist șters cu succes!")}catch(t){alert("Eroare la ștergerea specialistului. Vă rugăm încercați din nou.")}finally{v(!1)}})(t.id),className:"text-red-600 hover:text-red-900",children:"Șterge"})]})]},t.id)})):a.jsx("tr",{children:a.jsx("td",{colSpan:5,className:"px-4 py-4 text-center text-gray-500",children:"Nu există specialiști înregistrați."})})})]})})]})]}),k&&N&&a.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex justify-center items-center",children:a.jsxs("div",{className:"relative bg-white rounded-lg shadow-lg w-full max-w-md mx-4 p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-medium",children:"Editare Programare"}),a.jsx("button",{onClick:()=>{S(!1),w(null)},className:"text-gray-400 hover:text-gray-500",children:a.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"border-b pb-4",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Client"}),a.jsx("p",{className:"text-base font-medium",children:N.userName}),a.jsx("p",{className:"text-sm text-gray-500",children:N.userEmail}),N.userPhone&&a.jsx("p",{className:"text-sm text-gray-500",children:N.userPhone})]}),a.jsxs("div",{className:"border-b pb-4",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Serviciu"}),a.jsx("p",{className:"text-base font-medium",children:N.serviceName}),N.price&&N.price>0&&a.jsx("p",{className:"text-sm text-gray-500",children:ye(N.price)})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"appointmentDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Data programării"}),a.jsx("input",{type:"date",id:"appointmentDate",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:Z,onChange:e=>Q(e.target.value)})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"appointmentTime",className:"block text-sm font-medium text-gray-700 mb-1",children:"Ora de început"}),a.jsx("input",{type:"time",id:"appointmentTime",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:X,onChange:e=>_(e.target.value)})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),a.jsxs("select",{id:"status",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:q,onChange:e=>G(e.target.value),children:[a.jsx("option",{value:"scheduled",children:"Programată"}),a.jsx("option",{value:"completed",children:"Finalizată"}),a.jsx("option",{value:"cancelled",children:"Anulată"}),a.jsx("option",{value:"no-show",children:"Neprezentare"})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700 mb-1",children:"Note"}),a.jsx("textarea",{id:"notes",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",rows:3,value:J,onChange:e=>K(e.target.value),placeholder:"Note interne despre programare..."})]}),a.jsx("div",{className:"pt-4",children:a.jsx("button",{onClick:async()=>{if(N)try{if(!Z||!X)return void alert("Vă rugăm completați data și ora programării.");const a=g.find((e=>e.name===N.serviceName)),t=a?a.duration:60,[s,l]=X.split(":").map(Number),i=new Date;i.setHours(s,l,0);const m=new Date(i);m.setMinutes(m.getMinutes()+t);const u=`${String(m.getHours()).padStart(2,"0")}:${String(m.getMinutes()).padStart(2,"0")}`,x=new Date(Z),b=n.fromDate(x),f=c(e,"appointments",N.id);await d(f,{date:b,startTime:X,endTime:u,status:q,notes:J,updatedAt:n.now()}),await o(r(e,"appointmentHistory"),{appointmentId:N.id,userId:N.userId,previousDate:N.date,newDate:b,previousStatus:N.status,newStatus:q,changedBy:"admin",changedAt:n.now()}),h(p.map((e=>e.id===N.id?{...e,date:b,startTime:X,endTime:u,status:q,notes:J}:e))),alert("Programarea a fost actualizată cu succes!"),S(!1)}catch(a){alert("Eroare la actualizarea programării. Vă rugăm încercați din nou.")}},className:"w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Actualizează programarea"})})]})]})}),T&&N&&a.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex justify-center items-center",children:a.jsxs("div",{className:"relative bg-white rounded-lg shadow-lg w-full max-w-md mx-4 p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-medium",children:"Confirmare ștergere"}),a.jsx("button",{onClick:pe,className:"text-gray-400 hover:text-gray-500",children:a.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Sunteți sigur că doriți să ștergeți această programare? Această acțiune nu poate fi anulată."}),a.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[a.jsx("p",{className:"font-medium",children:"Detalii programare:"}),a.jsxs("p",{className:"text-sm mt-2",children:[a.jsx("span",{className:"font-medium",children:"Client:"})," ",N.userName]}),a.jsxs("p",{className:"text-sm",children:[a.jsx("span",{className:"font-medium",children:"Serviciu:"})," ",N.serviceName]}),a.jsxs("p",{className:"text-sm",children:[a.jsx("span",{className:"font-medium",children:"Data:"})," ",be(N.date)," "," ","(",fe(N.startTime)," - ",fe(N.endTime),")"]})]})]}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx("button",{onClick:pe,className:"flex-1 px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Anulează"}),a.jsx("button",{onClick:async()=>{if(N)try{await u(c(e,"appointments",N.id)),await o(r(e,"appointmentHistory"),{appointmentId:N.id,userId:N.userId,status:"deleted",changedBy:"admin",changedAt:n.now()}),h(p.filter((e=>e.id!==N.id))),alert("Programarea a fost ștearsă cu succes!"),C(!1)}catch(a){alert("Eroare la ștergerea programării. Vă rugăm încercați din nou.")}},className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500",children:"Șterge programarea"})]})]})}),a.jsx(x,{})]})};export{p as default};
