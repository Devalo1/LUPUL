import{c as e,l as a,h as s,a as i,j as r,M as t}from"./index-Bwkz9jAa.js";import{b as n,u as l}from"./vendor-ClDHXAES.js";import{q as d,s as c,w as o,t as m,N as x,u as h,x as u}from"./firebase-DUCcfN4Q.js";const p={verificaRolAdmin:async i=>{try{if("dani_popa21@yahoo.ro"===i)return await p.verificaSiCorecteazaAdminPrincipal(),!0;const a=d(e,"users"),s=c(a,o("email","==",i)),r=await m(s);if(!r.empty){const e=r.docs[0].data();return!0===e.isAdmin||"admin"===e.role}return!1}catch(r){const e=s(r);throw a.error("Eroare la verificarea rolului de admin:",e),e}},obtineComenzileUtilizator:async i=>{try{const a=d(e,"comenzi"),s=c(a,o("userId","==",i));return(await m(s)).docs.map((e=>({id:e.id,...e.data()})))}catch(r){const e=s(r);throw a.error("Eroare la obținerea comenzilor:",e),e}},verificaSiCorecteazaAdminPrincipal:async()=>{try{const s="dani_popa21@yahoo.ro",i=d(e,"users"),r=c(i,o("email","==",s)),t=await m(r);if(t.empty){const i=s.replace(/[^a-zA-Z0-9]/g,"_");await u(h(e,"users",i),{email:s,displayName:"Administrator",isAdmin:!0,role:"admin",createdAt:new Date}),a.info(`Utilizator admin creat pentru ${s}`)}else{const i=t.docs[0],r=i.data();r.isAdmin&&"admin"===r.role||(await x(h(e,"users",i.id),{isAdmin:!0,role:"admin"}),a.info(`Rolul de admin a fost actualizat pentru ${s}`))}return!0}catch(i){const e=s(i);return a.error("Eroare la verificarea/corectarea adminului principal:",e),!1}}},g=()=>{const{user:e,loading:a}=i(),[s,d]=n.useState(!1),[c,o]=n.useState(!0),m=l();return n.useEffect((()=>{a||(async()=>{if(e)try{if(e.email===t)d(!0),await p.verificaSiCorecteazaAdminPrincipal();else{const a=await p.verificaRolAdmin(e.email||"");d(a)}}catch(a){d(!1)}finally{o(!1)}})()}),[e,a]),n.useEffect((()=>{a||c||s||e||m("/login",{state:{from:"/admin"}})}),[s,a,c,e,m]),a||c?r.jsx("div",{className:"flex justify-center items-center h-screen",children:r.jsx("div",{className:"loading",children:"Se încarcă..."})}):s?r.jsx("div",{className:"admin-page min-h-screen bg-gray-50",children:r.jsx("div",{className:"container mx-auto px-4 py-6",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mt-6",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Panou de administrare"}),r.jsxs("div",{className:"text-sm text-gray-600",children:["Utilizator: ",r.jsx("span",{className:"font-medium",children:(null==e?void 0:e.displayName)||(null==e?void 0:e.email)})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-5 hover:shadow-md transition-shadow",children:[r.jsx("h3",{className:"font-bold text-blue-800 mb-2",children:"Produse"}),r.jsx("p",{className:"text-sm mb-4",children:"Gestionează produsele, categoriile și stocurile."}),r.jsxs("div",{className:"flex flex-col space-y-2",children:[r.jsx("a",{href:"/admin/add-product",className:"text-blue-600 hover:underline text-sm",children:"➕ Adaugă produs nou"}),r.jsx("a",{href:"/admin/categories",className:"text-blue-600 hover:underline text-sm",children:"🏷️ Gestionează categorii"}),r.jsx("a",{href:"/admin/inventory",className:"text-blue-600 hover:underline text-sm",children:"📦 Gestionează stocuri"})]})]}),r.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-5 hover:shadow-md transition-shadow",children:[r.jsx("h3",{className:"font-bold text-green-800 mb-2",children:"Evenimente"}),r.jsx("p",{className:"text-sm mb-4",children:"Gestionează evenimentele și programările."}),r.jsxs("div",{className:"flex flex-col space-y-2",children:[r.jsx("a",{href:"/admin/add-event",className:"text-green-600 hover:underline text-sm",children:"➕ Adaugă eveniment nou"}),r.jsx("a",{href:"/admin/events",className:"text-green-600 hover:underline text-sm",children:"📊 Toate evenimentele"}),r.jsx("a",{href:"/admin/appointments",className:"text-green-600 hover:underline text-sm",children:"📅 Gestionează programări"})]})]}),r.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-5 hover:shadow-md transition-shadow",children:[r.jsx("h3",{className:"font-bold text-purple-800 mb-2",children:"Utilizatori"}),r.jsx("p",{className:"text-sm mb-4",children:"Gestionează conturile utilizatorilor."}),r.jsxs("div",{className:"flex flex-col space-y-2",children:[r.jsx("a",{href:"/admin/users",className:"text-purple-600 hover:underline text-sm",children:"👥 Gestionează utilizatori"}),r.jsx("a",{href:"/admin/make-admin",className:"text-purple-600 hover:underline text-sm",children:"🔑 Permisiuni admin"})]})]}),r.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-5 hover:shadow-md transition-shadow",children:[r.jsx("h3",{className:"font-bold text-yellow-800 mb-2",children:"Conținut"}),r.jsx("p",{className:"text-sm mb-4",children:"Gestionează articolele și conținutul site-ului."}),r.jsxs("div",{className:"flex flex-col space-y-2",children:[r.jsx("a",{href:"/admin/articles",className:"text-yellow-600 hover:underline text-sm",children:"📝 Gestionează articole"}),r.jsx("a",{href:"/admin/articles/add",className:"text-yellow-600 hover:underline text-sm",children:"➕ Adaugă articol nou"})]})]}),r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-5 hover:shadow-md transition-shadow",children:[r.jsx("h3",{className:"font-bold text-red-800 mb-2",children:"Comenzi"}),r.jsx("p",{className:"text-sm mb-4",children:"Gestionează comenzile și facturile."}),r.jsxs("div",{className:"flex flex-col space-y-2",children:[r.jsx("a",{href:"/admin/orders",className:"text-red-600 hover:underline text-sm",children:"🛒 Toate comenzile"}),r.jsx("a",{href:"/admin/invoices",className:"text-red-600 hover:underline text-sm",children:"📃 Facturi"})]})]}),r.jsxs("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-5 hover:shadow-md transition-shadow",children:[r.jsx("h3",{className:"font-bold text-indigo-800 mb-2",children:"Setări"}),r.jsx("p",{className:"text-sm mb-4",children:"Configurează setările aplicației."}),r.jsxs("div",{className:"flex flex-col space-y-2",children:[r.jsx("a",{href:"/admin/settings",className:"text-indigo-600 hover:underline text-sm",children:"⚙️ Setări generale"}),r.jsx("a",{href:"/admin/settings/payment",className:"text-indigo-600 hover:underline text-sm",children:"💳 Setări plăți"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 text-center",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Produse"}),r.jsx("p",{className:"text-2xl font-bold text-gray-800",children:"126"})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 text-center",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Comenzi"}),r.jsx("p",{className:"text-2xl font-bold text-gray-800",children:"43"})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 text-center",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Utilizatori"}),r.jsx("p",{className:"text-2xl font-bold text-gray-800",children:"891"})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 text-center",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Evenimente"}),r.jsx("p",{className:"text-2xl font-bold text-gray-800",children:"15"})]})]})]})})}):r.jsx("div",{className:"flex justify-center items-center h-screen",children:r.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-6 py-4 rounded max-w-md",children:[r.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Acces restricționat"}),r.jsx("p",{children:"Nu aveți permisiunea de a accesa această pagină."}),r.jsx("button",{onClick:()=>m("/"),className:"mt-4 bg-red-600 hover:bg-red-700 text-white py-2 px-4 rounded",children:"Înapoi la pagina principală"})]})})};export{g as default};
