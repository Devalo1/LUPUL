import{j as e,a as t,d as i}from"./index-Bwkz9jAa.js";import{b as a,L as r}from"./vendor-ClDHXAES.js";import{m as s}from"./motion-DRplg3zU.js";import{q as n,s as l,K as d,t as c}from"./firebase-DUCcfN4Q.js";import{E as o}from"./ErrorMessage-BQ-WfWLX.js";import"./ThemeContext-DrZ0fxr9.js";const m=({filter:t,setFilter:i})=>e.jsx("div",{className:"sticky top-0 bg-white dark:bg-gray-800 shadow-md z-10",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex justify-center space-x-4",children:[e.jsx("button",{className:"px-4 py-2 rounded-md "+("all"===t?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-300"),onClick:()=>i("all"),children:"Toate"}),e.jsx("button",{className:"px-4 py-2 rounded-md "+("upcoming"===t?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-300"),onClick:()=>i("upcoming"),children:"Viitoare"}),e.jsx("button",{className:"px-4 py-2 rounded-md "+("past"===t?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-300"),onClick:()=>i("past"),children:"Trecute"})]})}),g=({event:t,onClose:i,currentUser:a})=>e.jsx(s.div,{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg max-w-lg w-full p-6",children:[e.jsx("button",{className:"absolute top-2 right-2 text-gray-600 dark:text-gray-300",onClick:i,children:"✕"}),e.jsx("img",{src:t.imageUrl,alt:t.title,className:"w-full h-48 object-cover rounded-lg mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-200 mb-2",children:t.title}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:[t.date," • ",t.time," • ",t.location]}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:t.description||"Descriere indisponibilă"}),a?e.jsx("button",{className:"w-full py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Check-in"}):e.jsxs("p",{className:"text-center text-gray-600 dark:text-gray-400",children:[e.jsx("button",{className:"text-blue-600 hover:underline",children:"Autentifică-te"})," pentru a face check-in."]})]})}),x=[{id:"business-lider-1",title:"Business Lider - Conferință pentru antreprenori",description:"O conferință dedicată antreprenorilor și liderilor de afaceri, unde veți învăța strategii de succes de la experți în domeniu și veți avea oportunitatea de networking cu alți profesioniști.",date:"2025-05-15",time:"10:00",location:"Petroșani, Hotel Rusu, Sala de conferințe",imageUrl:"/images/BussinesLider.jpg",capacity:50,registeredUsers:[]},{id:"mock-event-1",title:"Workshop de terapie prin artă",description:"Un workshop interactiv dedicat terapiei prin artă, unde participanții vor avea ocazia să exploreze diferite tehnici artistice ca metode de vindecare emoțională și dezvoltare personală.",date:"2025-06-10",time:"14:00",location:"Petroșani, Centrul Cultural Drăgan, Sala Studio",imageUrl:"/images/AdobeStock_370191089.jpeg",capacity:20,registeredUsers:[]},{id:"mock-event-2",title:"Conferință: Echilibrul interior în lumea modernă",description:"O conferință despre găsirea și menținerea echilibrului interior într-o lume în continuă schimbare, cu sfaturi practice și exerciții de mindfulness.",date:"2025-07-22",time:"18:30",location:"Petroșani, Teatrul Dramatic I.D. Sîrbu",imageUrl:"/images/AdobeStock_217770381.jpeg",capacity:50,registeredUsers:[]},{id:"mock-event-past",title:"Workshop: Tehnici de mindfulness și relaxare",description:"Un workshop practic unde veți învăța tehnici de mindfulness și relaxare pentru a reduce stresul și a îmbunătăți calitatea vieții.",date:"2024-03-15",time:"16:00",location:"Petroșani, Centrul de Sănătate Mintală",imageUrl:"/images/AdobeStock_367103665.jpeg",capacity:30,registeredUsers:["user1","user2","user3"]}],u=()=>{const{currentUser:u}=t(),[p,h]=a.useState((()=>localStorage.getItem("eventsFilter")||"all")),[b,y]=a.useState(null),[j,v]=a.useState([]),[f,N]=a.useState(!0),[w,k]=a.useState(null),[U,S]=a.useState(!1),C=e=>!(!u||!e.registeredUsers)&&e.registeredUsers.includes(u.uid);a.useEffect((()=>{localStorage.setItem("eventsFilter",p)}),[p]),a.useEffect((()=>{const e=()=>{S(/Android|iPhone|iPad|iPod|Opera Mini|IEMobile/i.test(navigator.userAgent))};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]);a.useEffect((()=>{(async()=>{try{const t=setTimeout((()=>{v(x),N(!1)}),U?5e3:1e4);try{const e=n(i,"events"),t=l(e,d("date","desc")),a=await c(t);if(a.empty)v(x);else{const e=a.docs.map((e=>({id:e.id,...e.data()})));v(e.length>0?e:x)}}catch(e){v(x)}finally{clearTimeout(t),N(!1)}}catch(t){v(x),k(null),N(!1)}})()}),[]);const E=e=>{if(!e)return"Data indisponibilă";try{const t={year:"numeric",month:"long",day:"numeric"};return new Date(e).toLocaleDateString("ro-RO",t)}catch(t){return e}},D=new Date,T=j.filter((e=>new Date(e.date)>=D)),L=j.filter((e=>new Date(e.date)<D)),z="upcoming"===p?T:"past"===p?L:j,P=e=>new Date(e)<D;return f?e.jsxs("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900",children:[e.jsx(m,{filter:p,setFilter:h}),e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})]}):e.jsxs("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 shadow-md p-4 md:p-6 mb-6",children:e.jsxs("div",{className:"container mx-auto",children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-center mb-6",children:"Evenimente"}),e.jsx(m,{filter:p,setFilter:h}),e.jsx("div",{className:"flex justify-center mt-4 text-sm text-gray-600 dark:text-gray-400",children:e.jsxs("div",{className:"flex space-x-6",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Toate:"})," ",j.length]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Viitoare:"})," ",T.length]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Trecute:"})," ",L.length]})]})})]})}),w?e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx(o,{message:w,onRetry:()=>window.location.reload()})}):0===z.length?e.jsx("div",{className:"container mx-auto px-4 py-8 text-center",children:e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Nu există evenimente disponibile pentru filtrele selectate."})}):e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:z.map((t=>{var i;return e.jsxs(s.div,{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden \n                  "+(P(t.date)?"border-l-4 border-gray-400":"border-l-4 border-green-500"),whileHover:{scale:1.02},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[e.jsxs("div",{className:"relative h-48",children:[e.jsx("img",{src:t.imageUrl||"/images/BussinesLider.jpg",alt:t.title,className:"w-full h-full object-cover "+(P(t.date)?"opacity-80":""),onError:e=>{e.currentTarget.src="/images/BussinesLider.jpg"}}),t.isLive&&e.jsx("span",{className:"absolute top-2 left-2 bg-red-600 text-white text-xs font-bold px-2 py-1 rounded",children:"Live acum"}),e.jsx("span",{className:"absolute top-2 right-2 text-xs font-bold px-2 py-1 rounded\n                    "+(P(t.date)?"bg-gray-700 text-white":"bg-green-600 text-white"),children:P(t.date)?"Trecut":"Viitor"})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"text-blue-600 text-sm font-medium mb-2",children:[E(t.date)," • ",t.time||"Ora indisponibilă"]}),e.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-200 mb-2",children:t.title}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:t.location}),e.jsx("div",{className:"h-20 overflow-hidden mb-4",children:e.jsxs("p",{className:"text-gray-600 dark:text-gray-400 text-sm line-clamp-4",children:[null==(i=t.description)?void 0:i.substring(0,150),t.description&&t.description.length>150?"...":""]})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:t.registeredUsers?e.jsxs("span",{children:[t.registeredUsers.length,"/",t.capacity," participanți"]}):e.jsxs("span",{children:["0/",t.capacity||"?"," participanți"]})}),e.jsx(r,{to:`/events/${t.id}`,className:"px-4 py-2 rounded-md transition-colors text-sm \n                        "+(P(t.date)?"bg-gray-600 hover:bg-gray-700 text-white":C(t)?"bg-green-600 hover:bg-green-700 text-white":"bg-blue-600 hover:bg-blue-700 text-white"),children:P(t.date)?"Vezi detalii":C(t)?"Ești înscris":"Înscrie-te acum"})]})]})]},t.id)}))})}),b&&e.jsx(g,{event:b,onClose:()=>y(null),currentUser:{id:"default",name:"Utilizator",email:""}})]})};export{u as default};
