import{C as e,j as t,d as s}from"./index-wFNFqtXh.js";import{b as a,c as r,L as o}from"./vendor-BbhD7xee.js";import{q as i,t as l}from"./firebase-Bc5mL6iy.js";import{i as c,j as n,k as d,l as m}from"./index-BlmLpygs.js";import{a as u,M as p}from"./index-CMqXeS_V.js";const g={gogosi:{nume:"GOGOȘI",produse:[{id:"gogosi-mica",nume:"Mică",descriere:"3 gogoși proaspete",pret:10,inStock:!0,category:"gogosi",image:"https://images.unsplash.com/photo-1551024601-bec78aea704b?q=80&w=500&auto=format&fit=crop"},{id:"gogosi-mare",nume:"Mare",descriere:"5 gogoși proaspete",pret:15,inStock:!0,category:"gogosi",image:"https://images.pexels.com/photos/3656119/pexels-photo-3656119.jpeg?auto=compress&cs=tinysrgb&w=500"},{id:"glazura-ciocolata",nume:"Opțiune glazură ciocolată",descriere:"Adaos pentru orice porție",pret:2,inStock:!0,category:"topping",image:"https://images.unsplash.com/photo-1575377222312-dd1a63a51638?q=80&w=500&auto=format&fit=crop"}],extraInfo:["Arome disponibile: ciocolată, ciocolată albă, fructe de pădure, căpșuni, caramel, kiwi, dulceață, etc."]},cafea:{nume:"CAFEA",produse:[{id:"espresso",nume:"Espresso",descriere:"Cafea espresso proaspăt măcinată",pret:5,inStock:!0,category:"cafea",image:"https://images.unsplash.com/photo-1514432324607-a09d9b4aefdd?q=80&w=500&auto=format&fit=crop"},{id:"cafea-lapte",nume:"Cafea cu lapte",descriere:"Cafea cu lapte cremos",pret:10,inStock:!0,category:"cafea",image:"https://images.unsplash.com/photo-1534778101976-62847782c213?q=80&w=500&auto=format&fit=crop"},{id:"cappuccino",nume:"Cappuccino",descriere:"Cappuccino cu spumă fină de lapte",pret:10,inStock:!0,category:"cafea",image:"https://images.unsplash.com/photo-1572442388796-11668a67e53d?q=80&w=500&auto=format&fit=crop"}]},clatite:{nume:"CLĂTITE",produse:[{id:"clatita",nume:"Bucată",descriere:"Clătită delicioasă cu diverse arome",pret:8,inStock:!0,category:"clatite",image:"https://images.unsplash.com/photo-1565299543923-37dd37887442?q=80&w=500&auto=format&fit=crop"}],extraInfo:["Arome disponibile: ciocolată, ciocolată albă, afine, etc."]},shake:{nume:"SHAKE",produse:[{id:"shake-ciocolata",nume:"Shake ciocolată neagră/albă",descriere:"Shake răcoritor cu ciocolată premium",pret:10,inStock:!0,category:"shake",image:"https://images.unsplash.com/photo-1541658016709-82535e94bc69?q=80&w=500&auto=format&fit=crop"},{id:"shake-proteic",nume:"Shake proteic",descriere:"Shake nutritiv cu adaos de proteine",pret:12,inStock:!0,category:"shake",image:"https://images.unsplash.com/photo-1563805042-7684c019e1cb?q=80&w=500&auto=format&fit=crop"}]},oferte:{nume:"OFERTĂ SPECIALĂ",produse:[{id:"good-morning",nume:"Good Morning",descriere:"Porție mică gogoși + cafea (între orele 10-12)",pret:12,inStock:!0,category:"oferte",image:"https://images.unsplash.com/photo-1495214783159-3503fd1b572d?q=80&w=500&auto=format&fit=crop"}]}},x=()=>{var x,h,b,f,j,y;const[w,v]=a.useState([]),[N,k]=a.useState(null),[S,C]=a.useState(!0),[E,I]=a.useState(null),[q,A]=a.useState([]),M=r(),P=new URLSearchParams(M.search).get("category"),[T,L]=a.useState(P||"toate"),[O,R]=a.useState("store"),{addItem:z}=(()=>{const t=a.useContext(e);if(!t)throw new Error("useCart must be used within a CartProvider");return t})(),$=e=>"name"in e&&"price"in e,[F,G]=a.useState({}),[V,B]=a.useState({visible:!1,message:"",type:"success",productId:""}),U=(e,t)=>{G((s=>({...s,[e]:Math.max(1,Math.min(10,t))})))},D=e=>{const t=e.id,s=F[t]||1;z({id:t,name:$(e)?e.name:e.nume,price:$(e)?e.price:e.pret,image:e.image,quantity:s}),B({visible:!0,message:`${s} x ${$(e)?e.name:e.nume} adăugat în coș!`,type:"success",productId:t}),setTimeout((()=>{B((e=>({...e,visible:!1})))}),3e3),G((e=>({...e,[t]:1})))};a.useEffect((()=>{L(P||"toate")}),[P]),a.useEffect((()=>{(async()=>{try{C(!0),I(null);const t=i(s,"products"),a=await l(t);if(a.empty)v([]);else{const e=a.docs.map((e=>{const t=e.data();return{id:e.id,name:t.name||"Produs fără nume",description:t.description||"Fără descriere",price:t.price||0,image:t.image||"/images/AdobeStock_370191089.jpeg",inStock:void 0===t.inStock||t.inStock,stock:t.stock||0,category:t.category||"necategorizat",ratings:t.ratings||{average:0,count:0,userRatings:[]}}}));v(e)}const r=i(s,"categories"),o=await l(r);if(o.empty)A([{id:"traditionale",name:"Produse tradiționale",slug:"traditionale"},{id:"suplimente",name:"Suplimente nutritive",slug:"suplimente"},{id:"carti",name:"Cărți și resurse",slug:"carti"}]);else{const e=o.docs.map((e=>({id:e.id,...e.data()})));A(e)}try{const e=await(async()=>{try{const e=await u.get("https://us-central1-lupul-sicorbul.cloudfunctions.net/getMenuItems",{timeout:3e3});return e.data&&e.data.success?e.data.data:g}catch(E){return u.isAxiosError(E)&&"ECONNREFUSED"===E.code||u.isAxiosError(E)&&E.code,g}})();k(e)}catch(e){}C(!1)}catch(t){I("A apărut o eroare la încărcarea datelor. Vă rugăm să încercați din nou."),C(!1)}})()}),[]);const _="toate"===T?w:w.filter((e=>"string"==typeof e.category?e.category===T:!(!e.category||"object"!=typeof e.category||!("id"in e.category))&&e.category.id===T)),H=e=>{switch(e){case"gogosi":return"https://images.unsplash.com/photo-1551024601-bec78aea704b?q=80&w=500&auto=format&fit=crop";case"cafea":return"https://images.unsplash.com/photo-1514432324607-a09d9b4aefdd?q=80&w=500&auto=format&fit=crop";case"clatite":return"https://images.unsplash.com/photo-1565299543923-37dd37887442?q=80&w=500&auto=format&fit=crop";case"shake":return"https://images.unsplash.com/photo-1541658016709-82535e94bc69?q=80&w=500&auto=format&fit=crop";default:return"https://images.unsplash.com/photo-1495214783159-3503fd1b572d?q=80&w=500&auto=format&fit=crop"}},K=(()=>{if(!N)return[];const e=[];return Object.values(N).forEach((t=>{t.produse.forEach((t=>{e.push(t)}))})),e})(),W=N?Object.keys(N).map((e=>({id:e,name:N[e].nume,slug:e}))):[];return t.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[t.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[t.jsxs("div",{className:"text-center mb-12",children:[t.jsx("h1",{className:"text-3xl font-extrabold text-gray-800 sm:text-4xl",children:"Magazinul Nostru"}),t.jsx("p",{className:"mt-4 text-lg text-gray-600 max-w-2xl mx-auto",children:"Descoperă produsele noastre autentice, create cu pasiune și respect pentru tradiție."}),t.jsxs("div",{className:"mt-8 flex justify-center space-x-4",children:[t.jsx("button",{onClick:()=>R("store"),className:"px-6 py-2 rounded-full flex items-center "+("store"===O?"bg-blue-600 text-white":"bg-gray-200 text-gray-800 hover:bg-gray-300"),children:t.jsx("span",{className:"mr-2",children:"Magazin Online"})}),t.jsxs("button",{onClick:()=>R("menu"),className:"px-6 py-2 rounded-full flex items-center "+("menu"===O?"bg-yellow-600 text-white":"bg-gray-200 text-gray-800 hover:bg-gray-300"),children:[t.jsx(c,{className:"mr-2"}),t.jsx("span",{children:"Produse Rulotă"})]})]}),"menu"===O&&t.jsx("div",{className:"mt-4",children:t.jsx(p,{})})]}),"store"===O?t.jsxs("div",{className:"flex flex-col md:flex-row",children:[t.jsx("div",{className:"w-full md:w-1/4 mb-8 md:mb-0 md:pr-8",children:t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Categorii"}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("button",{onClick:()=>L("toate"),className:"block w-full text-left px-3 py-2 rounded-md transition-colors "+("toate"===T?"bg-blue-50 text-blue-700":"hover:bg-gray-100 text-gray-700"),children:"Toate Categoriile"}),q.map((e=>t.jsx("button",{onClick:()=>L(e.slug||e.id),className:"block w-full text-left px-3 py-2 rounded-md transition-colors "+(T===(e.slug||e.id)?"bg-blue-50 text-blue-700":"hover:bg-gray-100 text-gray-700"),children:e.name},e.id||e.slug)))]})]})}),t.jsx("div",{className:"w-full md:w-3/4",children:S?t.jsx("div",{className:"flex justify-center items-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):E?t.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",children:[t.jsx("strong",{className:"font-bold",children:"Eroare! "}),t.jsx("span",{className:"block sm:inline",children:E}),t.jsx("button",{className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",onClick:()=>window.location.reload(),children:"Reîncarcă pagina"})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:(J=T,{traditionale:"Produse Tradiționale",suplimente:"Suplimente Nutritive",carti:"Cărți și Resurse",toate:"Toate Categoriile",gogosi:"Gogoși",cafea:"Cafea",clatite:"Clătite",shake:"Shake-uri",oferte:"Oferte Speciale"}[J]||J.charAt(0).toUpperCase()+J.slice(1))}),t.jsxs("p",{className:"text-gray-600 mt-1",children:[_.length," ",1===_.length?"produs":"produse"]})]}),0===_.length?t.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm text-center",children:[t.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4M6 18L18 18M6 6L18 6"})}),t.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900",children:"Nu am găsit produse în această categorie"}),t.jsx("p",{className:"mt-1 text-gray-500",children:"Vă rugăm să încercați o altă categorie."})]}):t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:_.map((e=>t.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow group",children:[t.jsxs("div",{className:"h-48 overflow-hidden relative",children:[t.jsx("img",{src:e.image,alt:e.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",onError:e=>{e.currentTarget.src="/images/AdobeStock_370191089.jpeg"}}),t.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent opacity-0 group-hover:opacity-100 transition-opacity flex items-end justify-center",children:t.jsx(o,{to:`/product/${e.id}`,className:"mb-4 px-4 py-2 bg-white/90 text-gray-900 rounded hover:bg-white transition",children:"Vezi detalii"})})]}),t.jsxs("div",{className:"p-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:e.name}),e.ratings&&t.jsxs("div",{className:"flex items-center mb-2",children:[t.jsx("div",{className:"flex text-yellow-400",children:[1,2,3,4,5].map((s=>{var a;return t.jsx("span",{children:s<=Math.floor((null==(a=e.ratings)?void 0:a.average)||0)?t.jsx(n,{className:"w-4 h-4"}):t.jsx(d,{className:"w-4 h-4"})},s)}))}),t.jsxs("span",{className:"text-xs text-gray-500 ml-1",children:["(",e.ratings.count,")"]})]}),t.jsx("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:e.description}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("span",{className:"text-lg font-bold text-blue-600",children:[e.price," Lei"]}),e.inStock?t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("input",{type:"number",min:"1",max:"10",value:F[e.id]||1,onChange:t=>U(e.id,parseInt(t.target.value)),className:"w-12 text-center border rounded"}),t.jsx("button",{onClick:t=>{t.stopPropagation(),D(e)},className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition",children:"Adaugă în coș"})]}):t.jsx("span",{className:"px-3 py-1 bg-gray-100 text-gray-600 text-sm rounded",children:"Stoc epuizat"})]})]})]},e.id)))})]})})]}):t.jsxs("div",{className:"flex flex-col md:flex-row",children:[t.jsx("div",{className:"w-full md:w-1/4 mb-8 md:mb-0 md:pr-8",children:t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Categorii Meniu"}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("button",{onClick:()=>L("toate"),className:"block w-full text-left px-3 py-2 rounded-md transition-colors "+("toate"===T?"bg-yellow-50 text-yellow-700":"hover:bg-gray-100 text-gray-700"),children:"Toate Produsele"}),W.map((e=>t.jsx("button",{onClick:()=>L(e.slug),className:"block w-full text-left px-3 py-2 rounded-md transition-colors "+(T===e.slug?"bg-yellow-50 text-yellow-700":"hover:bg-gray-100 text-gray-700"),children:e.name},e.id)))]})]})}),t.jsx("div",{className:"w-full md:w-3/4",children:S?t.jsx("div",{className:"flex justify-center items-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-yellow-600"})}):N?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"toate"===T?"Toate Produsele Rulotă":(null==(x=N[T])?void 0:x.nume)||"Produse"}),t.jsx("p",{className:"text-gray-600 mt-1",children:"toate"===T?`${K.length} ${1===K.length?"produs":"produse"}`:`${(null==(h=N[T])?void 0:h.produse.length)||0} ${1===(null==(b=N[T])?void 0:b.produse.length)?"produs":"produse"}`})]}),t.jsx("div",{children:t.jsx("span",{className:"text-sm font-medium text-yellow-600",children:"Program Rulotă: 10:00 - 18:00"})})]}),"toate"!==T&&(null==(f=N[T])?void 0:f.extraInfo)&&t.jsxs("div",{className:"mb-6 p-4 bg-yellow-50 rounded-lg border border-yellow-100",children:[t.jsx("h3",{className:"font-medium text-yellow-800 mb-2",children:"Informații suplimentare:"}),t.jsx("ul",{className:"list-disc pl-5 space-y-1",children:null==(j=N[T].extraInfo)?void 0:j.map(((e,s)=>t.jsx("li",{className:"text-gray-700",children:e},s)))})]}),"toate"===T?t.jsx("div",{className:"space-y-8",children:Object.entries(N).map((([e,s])=>t.jsxs("div",{children:[t.jsxs("h3",{className:"text-xl font-semibold text-gray-800 mb-4 flex items-center",children:["gogosi"===e&&t.jsx(m,{className:"mr-2 text-yellow-600"}),"cafea"===e&&t.jsx(c,{className:"mr-2 text-yellow-600"}),s.nume]}),s.extraInfo&&t.jsx("div",{className:"mb-4 p-3 bg-yellow-50 rounded-lg border border-yellow-100",children:t.jsx("ul",{className:"list-disc pl-5 space-y-1",children:s.extraInfo.map(((e,s)=>t.jsx("li",{className:"text-gray-700 text-sm",children:e},s)))})}),t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:s.produse.map((e=>t.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow",children:[t.jsx("div",{className:"h-48 overflow-hidden relative",children:t.jsx("img",{src:e.image,alt:e.nume,className:"w-full h-full object-cover transition-transform duration-300 hover:scale-105",onError:t=>{t.currentTarget.src=H(e.category)}})}),t.jsxs("div",{className:"p-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:e.nume}),t.jsx("p",{className:"text-gray-600 text-sm my-2",children:e.descriere}),t.jsxs("div",{className:"flex justify-between items-center mt-3",children:[t.jsxs("span",{className:"text-lg font-bold text-yellow-600",children:[e.pret," Lei"]}),e.inStock?t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("input",{type:"number",min:"1",max:"10",value:F[e.id]||1,onChange:t=>U(e.id,parseInt(t.target.value)),className:"w-12 text-center border rounded"}),t.jsx("button",{onClick:()=>D(e),className:"px-3 py-1 bg-yellow-600 text-white text-sm rounded hover:bg-yellow-700 transition",children:"Adaugă în coș"})]}):t.jsx("span",{className:"px-3 py-1 bg-gray-100 text-gray-600 text-sm rounded",children:"Stoc epuizat"})]})]})]},e.id)))})]},e)))}):t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:null==(y=N[T])?void 0:y.produse.map((e=>t.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow",children:[t.jsx("div",{className:"h-48 overflow-hidden relative",children:t.jsx("img",{src:e.image,alt:e.nume,className:"w-full h-full object-cover transition-transform duration-300 hover:scale-105",onError:t=>{t.currentTarget.src=H(e.category)}})}),t.jsxs("div",{className:"p-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:e.nume}),t.jsx("p",{className:"text-gray-600 text-sm my-2",children:e.descriere}),t.jsxs("div",{className:"flex justify-between items-center mt-4",children:[t.jsxs("span",{className:"text-lg font-bold text-yellow-600",children:[e.pret," Lei"]}),e.inStock?t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("input",{type:"number",min:"1",max:"10",value:F[e.id]||1,onChange:t=>U(e.id,parseInt(t.target.value)),className:"w-12 text-center border rounded"}),t.jsx("button",{onClick:()=>D(e),className:"px-3 py-1 bg-yellow-600 text-white text-sm rounded hover:bg-yellow-700 transition",children:"Adaugă în coș"})]}):t.jsx("span",{className:"px-3 py-1 bg-gray-100 text-gray-600 text-sm rounded",children:"Stoc epuizat"})]})]})]},e.id)))})]}):t.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",children:[t.jsx("strong",{className:"font-bold",children:"Eroare! "}),t.jsx("span",{className:"block sm:inline",children:"Nu s-a putut încărca meniul. Vă rugăm să încercați din nou."}),t.jsx("button",{className:"mt-4 px-4 py-2 bg-yellow-600 text-white rounded hover:bg-yellow-700",onClick:()=>window.location.reload(),children:"Reîncarcă pagina"})]})})]})]}),V.visible&&t.jsx("div",{className:"fixed bottom-4 right-4 p-4 rounded shadow-lg "+("success"===V.type?"bg-green-500 text-white":"bg-red-500 text-white"),children:V.message})]});var J};export{x as default};
