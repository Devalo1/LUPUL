<!doctype html>
<html lang="ro">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/png" href="/images/LC.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Lupul și Corbul - Empatie, Conexiune, Echilibru. Servicii terapeutice, produse pentru bunăstare și proiecte comunitare."
    />
    <meta name="theme-color" content="#3b82f6" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <!-- Allow popups to close windows under cross-origin opener policy -->
    <meta
      http-equiv="Cross-Origin-Opener-Policy"
      content="same-origin-allow-popups"
    />
    <title>Lupul și Corbul - Empatie, Conexiune, Echilibru</title>
    <!-- Fix agresiv pentru TDZ errors cu Emotion -->
    <script>
      // GLOBAL TDZ Prevention - execută înainte de orice modul
      (function() {
        'use strict';
        
        if (typeof window === "undefined") return;
        
        // Flag pentru debug
        window.__EMOTION_TDZ_AGGRESSIVE_FIX__ = true;
        
        // Pre-definire agresivă a TUTUROR variabilelor care pot cauza TDZ
        const globalVars = {
          'R': function() { return function() {}; },
          'e': {},
          't': {},
          'n': {},
          'r': {},
          'o': {},
          'i': {},
          'a': {},
          'u': {},
          'c': {},
          's': {},
          'l': {},
          'f': {},
          'd': {},
          'p': {},
          'h': {},
          'v': {},
          'g': {},
          'm': {},
          'y': {},
          'b': {},
          'w': {},
          'x': {},
          'k': {},
          'j': {},
          'q': {},
          'z': {}
        };
        
        // Aplicăm variabilele global
        Object.keys(globalVars).forEach(function(key) {
          if (typeof window[key] === "undefined") {
            try {
              Object.defineProperty(window, key, {
                value: globalVars[key],
                writable: true,
                configurable: true,
                enumerable: false
              });
            } catch(e) {
              window[key] = globalVars[key];
            }
          }
        });
        
        // Emotion cache pre-initialization
        window.__emotion_cache__ = window.__emotion_cache__ || new Map();
        window.__emotion_styles__ = window.__emotion_styles__ || new Map();
        window.__emotion_inserted__ = window.__emotion_inserted__ || new Set();
        window.__emotion_sheet__ = window.__emotion_sheet__ || null;
        window.__emotion_global__ = window.__emotion_global__ || {};
        
        // React Refresh compatibility
        window.$RefreshReg$ = window.$RefreshReg$ || function() {};
        window.$RefreshSig$ = window.$RefreshSig$ || function() { return function() {}; };
        
        console.info("[AGGRESSIVE TDZ Fix] Initialized all potential TDZ variables");
      })();
    </script>
    <!-- Preload Emotion modules -->
    <script>
      // Preload și cache Emotion modules pentru a evita lazy loading TDZ
      if (typeof window !== "undefined" && 'import' in window.HTMLScriptElement.prototype) {
        try {
          // Force preload Emotion
          const emotionModules = [
            './node_modules/@emotion/react/dist/emotion-react.browser.esm.js',
            './node_modules/@emotion/styled/dist/emotion-styled.browser.esm.js',
            './node_modules/@emotion/use-insertion-effect-with-fallbacks/dist/emotion-use-insertion-effect-with-fallbacks.browser.esm.js'
          ];
          
          emotionModules.forEach(function(modulePath) {
            const link = document.createElement('link');
            link.rel = 'modulepreload';
            link.href = modulePath;
            document.head.appendChild(link);
          });
        } catch(e) {
          console.warn("Emotion preload failed:", e);
        }
      }
    </script>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="./src/main.tsx"></script>
  </body>
</html>
